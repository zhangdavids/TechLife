<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="上药三品，神与气精" type="application/atom+xml" />






<meta name="description" content="莫道前路无知己 天下谁人不识君">
<meta property="og:type" content="website">
<meta property="og:title" content="上药三品，神与气精">
<meta property="og:url" content="http://yoursite.com/page/13/index.html">
<meta property="og:site_name" content="上药三品，神与气精">
<meta property="og:description" content="莫道前路无知己 天下谁人不识君">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="上药三品，神与气精">
<meta name="twitter:description" content="莫道前路无知己 天下谁人不识君">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/13/"/>





  <title>上药三品，神与气精</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">上药三品，神与气精</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">寿本乎仁 乐生于智　勤能补拙 俭可养廉</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/10/python基础小结25/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheung John">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上药三品，神与气精">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/10/python基础小结25/" itemprop="url">python基础小结25</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-10T09:37:32+08:00">
                2018-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.什么是Python？使用Python有什么好处？</p>
<pre><code>Python是一种编程语言，它有对象、模块、线程、异常处理和自动内存管理。

它简洁、简单、方便、容易扩展，有许多自带的数据结构，而且它开源。
</code></pre><p>2.什么是PEP8？</p>
<pre><code>PEP8是一个编程规范，内容是一些关于如何让你的程序更具可读性的建议。
</code></pre><p>3.什么是pickling和unpickling？</p>
<pre><code>Pickle模块读入任何Python对象，将它们转换成字符串，然后使用dump函数将其转储到一个文件中——

这个过程叫做pickling。反之从存储的字符串文件中提取原始Python对象的过程，叫做

unpickling。
</code></pre><p>4.Python是如何被解释的？</p>
<pre><code>Python是一种解释性语言，它的源代码可以直接运行。Python解释器会将源代码转换成中间语言，

之后再翻译成机器码再执行。
</code></pre><p>5.Python是怎样管理内存的？</p>
<pre><code>Python的内存管理是由私有heap空间管理的。所有的Python对象和数据结构都在一个私有heap中。    
程序员没有访问该heap的权限，只有解释器才能对它进行操作。为Python的heap空间分配内存是由    
Python的内存管理模块进行的，其核心API会提供一些访问该模块的方法供程序员使用。Python有自    
带的垃圾回收系统，它回收并释放没有被使用的内存，让它们能够被其他程序使用。
</code></pre><p>6.有哪些工具可以帮助debug或做静态分析？</p>
<pre><code>PyChecker是一个静态分析工具，它不仅能报告源代码中的错误，并且会报告错误类型和复杂度。    
Pylint是检验模块是否达到代码标准的另一个工具。
</code></pre><p>7.什么是Python装饰器？</p>
<pre><code>Python装饰器是Python中的特有变动，可以使修改函数变得更容易。
</code></pre><p>8.数组和元组之间的区别是什么？</p>
<pre><code>数组和元组之间的区别：数组内容是可以被修改的，而元组内容是只读的。另外，元组可以被哈希，比    
如作为字典的关键字。
</code></pre><p>9.参数按值传递和引用传递是怎样实现的？</p>
<pre><code>Python中的一切都是类，所有的变量都是一个对象的引用。引用的值是由函数确定的，因此无法被改    
变。但是如果一个对象是可以被修改的，你可以改动对象。
</code></pre><p>10.字典推导式和列表推导式是什么？</p>
<pre><code>它们是可以轻松创建字典和列表的语法结构。
</code></pre><p>11.Python都有哪些自带的数据结构？</p>
<pre><code>Python自带的数据结构分为可变的和不可变的。

可变的有：数组、集合、字典；

不可变的有：字符串、元组、数。    
</code></pre><p>12.什么是Python的命名空间？</p>
<pre><code>在Python中，所有的名字都存在于一个空间中，它们在该空间中存在和被操作——这就是命名空间。它    
就好像一个盒子，每一个变量名字都对应装着一个对象。当查询变量的时候，会从该盒子里面寻找相应    
的对象。
</code></pre><p>13.Python中的lambda是什么？</p>
<pre><code>这是一个常被用于代码中的单个表达式的匿名函数。
</code></pre><p>14.为什么lambda没有语句？</p>
<pre><code>匿名函数lambda没有语句的原因，是它被用于在代码被执行的时候构建新的函数对象并且返回。
</code></pre><p>15.Python中的pass是什么？</p>
<pre><code>Pass是一个在Python中不会被执行的语句。在复杂语句中，如果一个地方需要暂时被留白，它常常被    
用于占位符。
</code></pre><p>16.Python中什么是遍历器？</p>
<pre><code>遍历器用于遍历一组元素，比如列表这样的容器。
</code></pre><p>17.Python中的unittest是什么？</p>
<pre><code>在Python中，unittest是Python中的单元测试框架。它拥有支持共享搭建、自动测试、在测试中暂    
停代码、将不同测试迭代成一组，等等的功能。
</code></pre><p>18.在Python中什么是slicing（分片）？</p>
<pre><code>Slicing是一种在有序的对象类型中（数组，元组，字符串）节选某一段的语法。
</code></pre><p>19.在Python中什么是构造器？</p>
<pre><code>生成器是实现迭代器的一种机制。它功能的实现依赖于yield表达式，

除此之外它跟普通的函数没有两样。
</code></pre><p>20.Python中的docstring是什么？</p>
<pre><code>Python中文档字符串被称为docstring，

它在Python中的作用是为函数、模块和类注释生成文档。
</code></pre><p>21.如何在Python中拷贝一个对象？</p>
<pre><code>如果要在Python中拷贝一个对象，大多时候你可以用copy.copy()或者copy.deepcopy()。但并    
不是所有的对象都可以被拷贝。
</code></pre><p>22.Python中的负索引是什么？</p>
<pre><code>Python中的序列索引可以是正也可以是负。如果是正索引，0是序列中的第一个索引，1是第二个索    
引。如果是负索引，（-1）是最后一个索引而（-2）是倒数第二个索引。
</code></pre><p>23.如何将一个数字转换成一个字符串？</p>
<pre><code>你可以使用自带函数str()将一个数字转换为字符串。

如果你想要八进制或者十六进制数，可以用oct()或hex()。
</code></pre><p>24.Xrange和range的区别是什么？</p>
<pre><code>Xrange用于返回一个xrange对象，而range用于返回一个数组。不管那个范围多大，Xrange都使用    
同样的内存。
</code></pre><p>25.Python中的模块和包是什么？</p>
<pre><code>在Python中，模块是搭建程序的一种方式。每一个Python代码文件都是一个模块，并可以引用其他

的模块，比如对象和属性。

一个包含许多Python代码的文件夹是一个包。一个包可以包含模块和子文件夹。    
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/05/分享python面试题2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheung John">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上药三品，神与气精">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/05/分享python面试题2/" itemprop="url">分享python面试题2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-05T19:33:57+08:00">
                2018-03-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.Python是如何进行内存管理的？</p>
<p>答:从三个方面来说,一对象的引用计数机制,二垃圾回收机制,三内存池机制<br>一、对象的引用计数机制<br>Python内部使用引用计数，来保持追踪内存中的对象，所有对象都有引用计数。<br>引用计数增加的情况：<br>1，一个对象分配一个新名称<br>2，将其放入一个容器中（如列表、元组或字典）<br>引用计数减少的情况：<br>1，使用del语句对对象别名显示的销毁<br>2，引用超出作用域或被重新赋值<br>sys.getrefcount( )函数可以获得对象的当前引用计数<br>多数情况下，引用计数比你猜测得要大得多。对于不可变数据（如数字和字符串），解释器会在程序的不同部分共享内存，以便节约内存。<br>二、垃圾回收<br>1，当一个对象的引用计数归零时，它将被垃圾收集机制处理掉。<br>2，当两个对象a和b相互引用时，del语句可以减少a和b的引用计数，并销毁用于引用底层对象的名称。然而由于每个对象都包含一个对其他对象的应用，因此引用计数不会归零，对象也不会销毁。（从而导致内存泄露）。为解决这一问题，解释器会定期执行一个循环检测器，搜索不可访问对象的循环并删除它们。<br>三、内存池机制<br>Python提供了对内存的垃圾收集机制，但是它将不用的内存放到内存池而不是返回给操作系统。<br>1，Pymalloc机制。为了加速Python的执行效率，Python引入了一个内存池机制，用于管理对小块内存的申请和释放。<br>2，Python中所有小于256个字节的对象都使用pymalloc实现的分配器，而大的对象则使用系统的malloc。<br>3，对于Python对象，如整数，浮点数和List，都有其独立的私有内存池，对象间不共享他们的内存池。也就是说如果你分配又释放了大量的整数，用于缓存这些整数的内存就不能再分配给浮点数。</p>
<p>2.什么是lambda函数？它有什么好处?</p>
<p>答：lambda 表达式，通常是在需要一个函数，但是又不想费神去命名一个函数的场合下使用，也就是指匿名函数<br>lambda函数：首要用途是指点短小的回调函数<br>lambda [arguments]:expression</p>
<pre><code>&gt;&gt;&gt; a=lambdax,y:x+y
&gt;&gt;&gt; a(3,11)
</code></pre><p>3.Python里面如何实现tuple和list的转换？</p>
<p>答：直接使用tuple和list函数就行了，type()可以判断对象的类型</p>
<p>4.请写出一段Python代码实现删除一个list里面的重复元素</p>
<p>答：<br>1,使用set函数，set(list)</p>
<p>2，使用字典函数，</p>
<pre><code>&gt;&gt;&gt;a=[1,2,4,2,4,5,6,5,7,8,9,0]
&gt;&gt;&gt; b={}
&gt;&gt;&gt;b=b.fromkeys(a)
&gt;&gt;&gt;c=list(b.keys())
&gt;&gt;&gt; c
</code></pre><p>5.编程用sort进行排序，然后从最后一个元素开始判断</p>
<pre><code>a=[1,2,4,2,4,5,7,10,5,5,7,8,9,0,3]

a.sort()
last=a[-1]
for i inrange(len(a)-2,-1,-1):
if last==a[i]:
del a[i]
else:last=a[i]
print(a)
</code></pre><p>6.Python里面如何拷贝一个对象？（赋值，浅拷贝，深拷贝的区别）</p>
<p>答：赋值（=），就是创建了对象的一个新的引用，修改其中任意一个变量都会影响到另一个。</p>
<p>浅拷贝：创建一个新的对象，但它包含的是对原始对象中包含项的引用（如果用引用的方式修改其中一个对象，另外一个也会修改改变）{1,完全切片方法；2，工厂函数，如list()；3，copy模块的copy()函数}</p>
<p>深拷贝：创建一个新的对象，并且递归的复制它所包含的对象（修改其中一个，另外一个不会改变）{copy模块的deep.deepcopy()函数}</p>
<p>7.介绍一下except的用法和作用？</p>
<p>答：try…except…except…[else…][finally…]<br>执行try下的语句，如果引发异常，则执行过程会跳到except语句。对每个except分支顺序尝试执行，如果引发的异常与except中的异常组匹配，执行相应的语句。如果所有的except都不匹配，则异常会传递到下一个调用本代码的最高层try代码中。<br>try下的语句正常执行，则执行else块代码。如果发生异常，就不会执行<br>如果存在finally语句，最后总是会执行。<br>8.Python中pass语句的作用是什么？</p>
<p>答：pass语句不会执行任何操作，一般作为占位符或者创建占位程序，whileFalse:pass<br>9.介绍一下Python下range()函数的用法？</p>
<p>答：列出一组数据，经常用在for  in range()循环中<br>10.如何用Python来进行查询和替换一个文本字符串？</p>
<p>答：可以使用re模块中的sub()函数或者subn()函数来进行查询和替换，<br>格式：sub(replacement, string[,count=0])（replacement是被替换成的文本，string是需要被替换的文本，count是一个可选参数，指最大被替换的数量）</p>
<pre><code>&gt;&gt;&gt;import re
&gt;&gt;&gt;p=re.compile(‘blue|white|red’)
&gt;&gt;&gt;print(p.sub(‘colour’,&apos;blue socks and red shoes’))
colour socks and colourshoes
&gt;&gt;&gt;print(p.sub(‘colour’,&apos;blue socks and red shoes’,count=1))
colour socks and redshoes
</code></pre><p>subn()方法执行的效果跟sub()一样，不过它会返回一个二维数组，包括替换后的新的字符串和总共替换的数量</p>
<p>11.Python里面match()和search()的区别？</p>
<p>答：re模块中match(pattern,string[,flags]),检查string的开头是否与pattern匹配。<br>re模块中research(pattern,string[,flags]),在string搜索pattern的第一个匹配值。</p>
<pre><code>&gt;&gt;&gt;print(re.match(‘super’, ‘superstition’).span())
(0, 5)
&gt;&gt;&gt;print(re.match(‘super’, ‘insuperable’))
None
&gt;&gt;&gt;print(re.search(‘super’, ‘superstition’).span())
(0, 5)
&gt;&gt;&gt;print(re.search(‘super’, ‘insuperable’).span())
(2, 7)
</code></pre><p>12.用Python匹配HTML tag的时候，&lt;.<em>&gt;和&lt;.</em>?&gt;有什么区别？</p>
<p>答：术语叫贪婪匹配( &lt;.<em>&gt; )和非贪婪匹配(&lt;.</em>?&gt; )<br>例如:<br>test<br>&lt;.<em>&gt; :<br>test<br>&lt;.</em>?&gt; :</p>
<p>13.Python里面如何生成随机数？</p>
<p>答：random模块<br>随机整数：random.randint(a,b)：返回随机整数x,a&lt;=x&lt;=b<br>random.randrange(start,stop,[,step])：返回一个范围在(start,stop,step)之间的随机整数，不包括结束值。<br>随机实数：random.random( ):返回0到1之间的浮点数<br>random.uniform(a,b):返回指定范围内的浮点数。<br>14.有没有一个工具可以帮助查找python的bug和进行静态的代码分析？</p>
<p>答：PyChecker是一个python代码的静态分析工具，它可以帮助查找python代码的bug, 会对代码的复杂度和格式提出警告<br>Pylint是另外一个工具可以进行codingstandard检查<br>15.如何在一个function里面设置一个全局的变量？</p>
<p>答：解决方法是在function的开始插入一个global声明：<br>def f()<br>global x<br>16.单引号，双引号，三引号的区别</p>
<p>答：单引号和双引号是等效的，如果要换行，需要符号(),三引号则可以直接换行，并且可以包含注释<br>如果要表示Let’s go 这个字符串<br>单引号：s4 = ‘Let\’s go’<br>双引号：s5 = “Let’s go”<br>s6 = ‘I realy like“python”!’<br>这就是单引号和双引号都可以表示字符串的原因了</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/03/python装饰器全解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheung John">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上药三品，神与气精">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/03/python装饰器全解/" itemprop="url">python装饰器全解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-03T16:48:13+08:00">
                2018-03-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>python装饰器的作用 <strong>使得函数包装和方法包装变得更容易阅读和理解</strong></p>
<p>1.一般语法和可能的实现</p>
<ul>
<li>作为一个函数</li>
<li>作为一个类</li>
<li>参数化装饰器</li>
<li>保存内省的装饰器</li>
</ul>
<p>2.用法和有用的例子</p>
<ul>
<li>参数检查</li>
<li>缓存</li>
<li>代理</li>
<li>上下文提供者</li>
</ul>
<p><em>Python 函数不同于其他编程语言，它可以作为第一类对象使用，这是关键。因为装饰器本质上还是函数</em></p>
<p>很多人对装饰器难以理解，原因是由于以下三点内容没有搞清楚：</p>
<p>关于函数“变量”（或“变量”函数）的理解</p>
<p>关于高阶函数的理解</p>
<p>关于嵌套函数的理解</p>
<p>那么如果能对以上的问题一一攻破，同时遵循装饰器的基本原则，相信会对装饰器有个很好的理解的。那么我们先来看以下装饰器的目的及其原则。</p>
<p>1、装饰器</p>
<p>装饰器实际上就是为了给某程序增添功能，但该程序已经上线或已经被使用，那么就不能大批量的修改源代码，这样是不科学的也是不现实的，因为就产生了装饰器，使得其满足：</p>
<ul>
<li>不能修改被装饰的函数的源代码</li>
<li>不能修改被装饰的函数的调用方式</li>
<li>满足1、2的情况下给程序增添功能<br>那么根据需求，同时满足了这三点原则，这才是我们的目的。因为，下面我们从解决这三点原则入手来理解装饰器。</li>
</ul>
<p>等等，我要在需求之前先说装饰器的原则组成：</p>
<p>&lt; 函数+实参高阶函数+返回值高阶函数+嵌套函数+语法糖 = 装饰器 &gt;</p>
<p>这个式子是贯穿装饰器的灵魂所在！</p>
<p>2、需求实现</p>
<pre><code>improt time
def test():
    time.sleep(2)
    print(&quot;test is running!&quot;)
test()
</code></pre><p>给程序添加统计运行时间（2 second）功能</p>
<p>如何进行呢？</p>
<p>很显然，函数和变量是一样的，都是“一个名字对应内存地址中的一些内容”<br>那么根据这样的原则，我们就可以理解两个事情：</p>
<p>test1表示的是函数的内存地址</p>
<p>test1()就是调用对在test1这个地址的内容，即函数</p>
<p>如果这两个问题可以理解，那么我们就可以进入到下一个原因(关于高阶函数的理解)</p>
<p>那么对于高阶函数的形式可以有两种：</p>
<p>把一个函数名当作实参传给另外一个函数（“实参高阶函数”）</p>
<p>返回值中包含函数名（“返回值高阶函数”）</p>
<p>那么这里面所说的函数名，实际上就是函数的地址，也可以认为是函数的一个标签而已，并不是调用，是个名词。如果可以把函数名当做实参，那么也就是说可以把函数传递到另一个函数，然后在另一个函数里面做一些操作，根据这些分析来看，这岂不是满足了装饰器三原则中的第一条，即不修改源代码而增加功能。那我们看来一下具体的做法：</p>
<p>还是针对上面那段代码：</p>
<pre><code>improt time

def test():
    time.sleep(2)
    print(&quot;test is running!&quot;)

def deco(func):  
    start = time.time()
    func() #2
    stop = time.time()
    print(stop-start)

deco(test) #1
</code></pre><p>装饰有参数的函数</p>
<pre><code>improt time

def timer(func)
    def deco(*args, **kwargs):  
        start = time.time()
        res = func(*args, **kwargs)
        stop = time.time()
        print(stop-start)
        return res 
    return deco

@timer
def test(parameter): #8
    time.sleep(2)
    print(&quot;test is running!&quot;)   
    return &quot;Returned value&quot;
test()     
</code></pre><p>带参数的装饰器</p>
<pre><code>import time

def timer(parameter):

    def outer_wrapper(func):

        def wrapper(*args, **kwargs):
            if parameter == &apos;task1&apos;:
                start = time.time()
                func(*args, **kwargs)
                stop = time.time()
                print(&quot;the task1 run time is :&quot;, stop - start)
            elif parameter == &apos;task2&apos;:
                start = time.time()
                func(*args, **kwargs)
                stop = time.time()
                print(&quot;the task2 run time is :&quot;, stop - start)

        return wrapper

    return outer_wrapper

@timer(parameter=&apos;task1&apos;)
def task1():
    time.sleep(2)
    print(&quot;in the task1&quot;)

@timer(parameter=&apos;task2&apos;)
def task2():
    time.sleep(2)
    print(&quot;in the task2&quot;)

task1()
task2()    
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/03/分享python面试题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheung John">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上药三品，神与气精">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/03/分享python面试题/" itemprop="url">分享python面试题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-03T14:01:01+08:00">
                2018-03-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.is和==有什么区别？</p>
<p>python当中对象包含三要素，分别是id（身份标识）、type（数据类型）、value（值）</p>
<p>==是python的比较运算符，用于比较value值是否相等</p>
<p>is是同一性运算符，比较的是id是否相同</p>
<p>a、b值相同</p>
<p>只有数值型和字符串型时， a is b 为true<br>是tuple list dict 或者 set时，a is b 为false</p>
<p>2.解释装饰器</p>
<p>写代码要遵循开发封闭原则，虽然在这个原则是用的面向对象开发，但是也适用于函数式编程，简单来说，它规定已经实现的功能代码不允许被修改，但可以被扩展，</p>
<pre><code>def w1(func):
    def inner():
        # 验证1
        # 验证2
        # 验证3
        return func()
    return inner

@w1
def f1():
    print &apos;f1&apos;
@w1
def f2():
    print &apos;f2&apos;
@w1
def f3():
    print &apos;f3&apos;
@w1
def f4():
    print &apos;f4&apos;
</code></pre><p>如上例@w1内部会执行以下操作：</p>
<ul>
<li>执行w1函数，并将 @w1 下面的 函数 作为w1函数的参数，即：@w1 等价于 w1(f1)</li>
</ul>
<p>所以，内部就会去执行：</p>
<pre><code>def inner:
    #验证
    return f1()   # func是参数，此时 func 等于 f1
return inner     # 返回的 inner，inner代表的是函数，非执行函数
</code></pre><p>其实就是将原来的 f1 函数塞进另外一个函数中</p>
<ul>
<li>将执行完的 w1 函数返回值赋值给@w1下面的函数的函数名</li>
</ul>
<p>w1函数的返回值是：</p>
<pre><code>def inner:
    #验证
    return 原来f1()  # 此处的 f1 表示原来的f1函数
</code></pre><p>然后，将此返回值再重新赋值给 f1，即：</p>
<pre><code>新f1 = def inner:
        #验证
        return 原来f1() 
</code></pre><p>所以，以后业务部门想要执行 f1 函数时，就会执行 新f1 函数，在 新f1 函数内部先执行验证，再执行原来的f1函数，然后将 原来f1 函数的返回值 返回给了业务调用者。</p>
<p>如此一来， 即执行了验证的功能，又执行了原来f1函数的内容，并将原f1函数返回值 返回给业务调用者  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/03/normal-library/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheung John">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上药三品，神与气精">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/03/normal-library/" itemprop="url">normal-library</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-03T08:14:00+08:00">
                2018-03-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><p>我做运维的时候，使用Python完成了一些打包和备份的脚本，也就是把某个目录压缩成各种格式（tar.gz、tar.bz2、zip）。 这个脚本其实打包压缩的部分还是比较复杂的。直到我看到了这个：</p>
<p> In : from shutil import make_archive<br> In : make_archive(‘archive_xxx’, ‘bztar’)<br> Out: ‘archive_xxx.tar.bz2’  </p>
</li>
</ol>
<p>有兴趣的可以翻一下源码。你想要的说不定标准库里面已经实现。当然，有标准库不满足的额外需求，也可以参照它实现。</p>
<ol>
<li><p>你可能接触过定时任务（crontab），它管理的任务很规矩，到点执行（当然精确度不那么高）。现在设想你有更复杂的任务需求：这个任务是动态的，也就是不一定啥时候就来排上队约定一个事件等着执行。这时候你可以想，这可以使用队列（Queue模块）啊，嗯也不错。难度再提高：加上优先级策略并能取消某个指定的已经放入队列的任务。现在思考下，这个怎么实现？其实很多工程实践的最好范例都在标准库中。sched模块中的scheduler类就是一个这样的通用的事件调度类。你可以学习它的实现。你问我它的实现多复杂？整个模块加上大幅的注释才134行。</p>
</li>
<li><p>学习Python的过程中，一开始我对于装饰器contextmanager+yield怎么都不懂。直到我看了contextmanager的源代码, 其实非常简单就懂了。它的docstring清楚地不能再清楚了：</p>
</li>
</ol>
<pre><code class="python">
Typical usage:                                                                               

<span class="meta">@contextmanager                                                                          </span>
<span class="function"><span class="keyword">def</span> <span class="title">some_generator</span><span class="params">(&lt;arguments&gt;)</span>:</span>                                                         
    &lt;setup&gt;                                                                              
    <span class="keyword">try</span>:                                                                                 
        <span class="keyword">yield</span> &lt;value&gt;                                                                    
    <span class="keyword">finally</span>:                                                                             
        &lt;cleanup&gt;                                                                        

This makes this:                                                                             

<span class="keyword">with</span> some_generator(&lt;arguments&gt;) <span class="keyword">as</span> &lt;variable&gt;:                                          
    &lt;body&gt;                                                                               

equivalent to this:                                                                          

&lt;setup&gt;                                                                                  
<span class="keyword">try</span>:                                                                                     
    &lt;variable&gt; = &lt;value&gt;                                                                 
    &lt;body&gt;                                                                               
<span class="keyword">finally</span>:                                                                                 
&lt;cleanup&gt;
</code></pre>
<ol>
<li>我之前使用多线程编程都这样用，在好长一段时间里面对于多进程和多线程之前怎么选择都搞得不清楚。看多了开源项目代码，我发现了好多人在用multiprocessing.dummy这个子模块，「dummy」这个词本身好奇怪，我决定去看多进程（multiprocessing）库的代码。「咦！怎么和多线程的接口一样呢」。后知后觉的我看到文档中这样说：</li>
</ol>
<p>multiprocessing.dummy replicates the API of multiprocessing but is no more than a wrapper around the threading module.<br>恍然大悟！！！如果分不清任务是CPU密集型还是IO密集型，我就用如下2个方法分别试：</p>
<p>from multiprocessing import Pool<br>from multiprocessing.dummy import Pool<br>哪个速度快就用那个。从此以后我都尽量在写兼容的方式，这样在多线程/多进程之间切换非常方便。</p>
<ol>
<li>13-14年间，Flask还没怎么火，那时候装饰器风格的Web框架还有一个Bottle。我当时就直接想去看Bottle代码，发现一上来import了一堆模块，你先感受下bottle/bottle.py at master · bottlepy/bottle · GitHub ，第一感觉就是懵啊，这都是干什么的啊，为什么要用啊？这就是促使我去看标准库实现最重要的原因：学会了我才能更好的看懂别人写的代码。</li>
</ol>
<p>但是不是所有的标准库都要一视同仁的看呢？你可以设置优先级，先看那些不可不知道的模块。我在这里列一下，并对它的用途和其中重要的类、函数的作用加以说明等。要是每个都写例子实在太多太密集，怕大家看不下去，我都用外部链接了。</p>
<ol>
<li>argparse。 用来替代optparse的命令行解析库。如果你考虑用更直观的，推荐docopt，它使用docstring所见即所得实现命令行解析。</li>
<li>collections。 包含了一些额外的数据类型。其中的OrderedDict（有序列的字典）、defaultdict（带有默认值的字典）、namedtuple（通过创建带有字段属性的元组子类）和deque（高效实现插入和删除操作的双向列表）非常常用。</li>
<li>functools。 这个模块有一些非常有用的工具，其中的partial（偏函数）、wraps（将被包装函数的信息拷贝过来）、total_ordering（只需要定义2个<strong>XX</strong>方法就可实现对象对比的类装饰器）、cmp_to_key（将老式的比较函数转化为关键字函数）非常常用。</li>
<li>glob。 文件名的shell模式匹配，你不用遍历整个目录判断每个文件是不是符合，使用glob一句话就解决。</li>
<li>multiprocessing。多进程模块，这重要性就不说了。</li>
<li><p>os。应该是日常工作最常用的模块了，你是否了解它里面所有的函数和实现呢？举个例子，获取环境变量，我之前这样用：<br>In : os.environ.get(‘PYTHONPATH’)<br>读完源码之后我学了一招：<br>os.getenv(‘PYTHONPATH’)<br>好吧，省了5个字符。</p>
</li>
<li><p>Queue。这个模块用于多线程编程，它是一个线程安全的FIFO（先进先出）的队列实现。如果是多进程编程，选用multiprocessing.queues中的Queue、SimpleQueue、JoinableQueue这三个队列实现。 </p>
</li>
<li><p>SimpleHTTPServer。最简单地HTTP Server实现。不使用Web框架，一句：</p>
<pre><code>python -m SimpleHTTPServer PORT
</code></pre><p> 就可以运行起来静态服务。平时用它预览和下载文件太方便了。</p>
</li>
<li><p>subprocess。 如果你还被某些书籍引导使用os.system或者os.popen等模块，现在是放弃它们的时候了，这个模块会满足你绝大多数的系统命令执行、执行结果获取和解析等需求。其中最有用的是call（执行系统命令）、check_call（执行结果不为0则抛出异常）、check_output（最方便的获取执行的输出的函数）、Popen+PIPE（支持管道的多命令执行）。</p>
</li>
<li><p>threading。多线程模块，重要性也不必说。</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/12/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/14/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Cheung John" />
            
              <p class="site-author-name" itemprop="name">Cheung John</p>
              <p class="site-description motion-element" itemprop="description">莫道前路无知己 天下谁人不识君</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">144</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/zhangdavids" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:zhangjohn202@gmail.com" target="_blank" title="Email">
                      
                        <i class="fa fa-fw fa-envelope"></i>Email</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cheung John</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
